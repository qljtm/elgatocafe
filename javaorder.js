const products = [
    {
        id: 1,
        name: "Espresso Coffee",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c1.png"
    },
    {
        id: 2,
        name: "Cappuccino",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c2.png"
    },
    {
        id: 3,
        name: "Caramel Macchiato",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c3.png"
    },
    {
        id: 4,
        name: "Salted Caramel",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c4.png"
    }
    ,
    {
        id: 5,
        name: "Spanish Latte",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c5.png"
    }
    ,
    {
        id: 6,
        name: "Mocha",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c6.png"
    }
    ,
    {
        id: 7,
        name: "Biscoffee",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c7.png"
    }
    ,
    {
        id: 8,
        name: "French Vanilla",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c8.png"
    }
    ,
    {
        id: 9,
        name: "Affogato",
        price: 150,
        description: "Short description about coffee",
        image: "assets/c9.png"
    }
    ,
    {
        id: 10,
        name: "Rose Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t1.png"
    }
    ,
    {
        id: 11,
        name: "Green Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t2.png"
    }
    ,
    {
        id: 12,
        name: "Mint Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t3.png"
    }
    ,
    {
        id: 13,
        name: "Lemon Balm Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t4.png"
    }
    ,
    {
        id: 14,
        name: "Black Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t5.png"
    }
    ,
    {
        id: 15,
        name: "Raspberry Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t6.png"
    }
    ,
    {
        id: 16,
        name: "Senna Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t7.png"
    }
    ,
    {
        id: 17,
        name: "White Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t8.png"
    }
    ,
    {
        id: 18,
        name: "Sencha Tea",
        price: 150,
        description: "Short description about coffee",
        image: "assets/t9.png"
    }
    ,
    {
        id: 19,
        name: "Choco Dip Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f1.png"
    }
    ,
    {
        id: 20,
        name: "Berry Cheesecake Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f2.png"
    }
    ,
    {
        id: 21,
        name: "Salted Caramel Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f3.png"
    }
    ,
    {
        id: 22,
        name: "Vanilla Bean Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f4.png"
    }
    ,
    {
        id: 23,
        name: "Matcha Latte Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f5.png"
    }
    ,
    {
        id: 24,
        name: "Cookies and Cream Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f6.png"
    }
    ,
    {
        id: 25,
        name: "Taro Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f7.png"
    }
    ,
    {
        id: 26,
        name: "Java Chip Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f8.png"
    }
    ,
    {
        id: 27,
        name: "Double Fudge Frappe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/f9.png"
    }
    ,
    {
        id: 28,
        name: "Cinnamon",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p1.png"
    }
    ,
    {
        id: 29,
        name: "CheeseCake",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p2.png"
    }
    ,
    {
        id: 30,
        name: "Brownies",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p3.png"
    }
    ,
    {
        id: 31,
        name: "Croissant",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p4.png"
    }
    ,
    {
        id: 32,
        name: "Waffle Cake",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p6.png"
    }
    ,
    {
        id: 33,
        name: "Swiss Roll",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p7.png"
    }
    ,
    {
        id: 34,
        name: "Crepe",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p8.png"
    }
    ,
    {
        id: 35,
        name: "Chocolate Eclair",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p5.png"
    }
    ,
    {
        id: 36,
        name: "Baumkuchen",
        price: 150,
        description: "Short description about coffee",
        image: "assets/p9.png"
    }
    ,
    {
        id: 37,
        name: "Fish and Bell Pepper",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm1.png"
    }
    ,
    {
        id: 38,
        name: "Batard Bread",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm2.png"
    }
    ,
    {
        id: 39,
        name: "Pan Seared Shrimp",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm3.png"
    }
    ,
    {
        id: 40,
        name: "Spinach and Shrimp Pasta",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm4.png"
    }
    ,
    {
        id: 41,
        name: "Chickpea Salad Sandwich",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm5.png"
    }
    ,
    {
        id: 42,
        name: "Cheesy Chicken Nachos",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm6.png"
    }
    ,
    {
        id: 43,
        name: "Spaghetti",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm7.png"
    }
    ,
    {
        id: 44,
        name: "Lasagna",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm8.png"
    }
    ,
    {
        id: 45,
        name: "Grilled Shrimp Salad",
        price: 150,
        description: "Short description about coffee",
        image: "assets/lm9.png"
    }
    
    
];

// Variables for the buttons and delivery fee
const deliveryButton = document.getElementById('delivery');
const pickupButton = document.getElementById('pickup');
const deliveryFeeElement = document.getElementById('deliveryFee');


// Add event listeners to handle delivery/pickup selection
deliveryButton.addEventListener('click', () => {
    // Set the delivery fee and update the total
    deliveryFeeElement.textContent = `₱40`;
    deliveryFee = 40;
    updateCart(); // Recalculate total
    deliveryButton.classList.add('active');
    pickupButton.classList.remove('active');
});

pickupButton.addEventListener('click', () => {
    // Set the pickup fee and update the total (assumed ₱0)
    deliveryFeeElement.textContent = `₱0`;
    deliveryFee = 0; // No delivery fee for pickup
    updateCart(); // Recalculate total
    pickupButton.classList.add('active');
    deliveryButton.classList.remove('active');
});

// Proceed with the rest of your existing code...

let cart = [];


function updateCart() {
    if (cart.length === 0) {
        cartItemName.textContent = "";
        subtotalElement.textContent = "₱0";
        totalElement.textContent = "₱0";
        renderCartItems();
        return;
    }

    if (cart.length > 0) {
        cartItemName.textContent = cart[0].name;
    } else {
        cartItemName.textContent = "";
    }

    let subtotal = 0;
    cart.forEach(item => {
        subtotal += item.price * item.quantity;
    });

    // Update subtotal
    subtotalElement.textContent = `₱${subtotal}`;
    // Update total, including delivery fee
    totalElement.textContent = `₱${subtotal + deliveryFee}`;

    renderCartItems();
}


function renderCartItems() {
    
    if (!document.getElementById('cartItems')) return;
    
    cartItemsContainer.innerHTML = '';
    
    
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="empty-cart-message">Your cart is empty</p>';
        return;
    }
    
    
    cart.forEach(item => {
        const cartItem = document.createElement('div');
        cartItem.classList.add('cart-item');
        
        let extrasText = '';
        if (item.extras && item.extras.length > 0) {
            extrasText = item.extras.map(extra => 
                `${extra.name} x${extra.quantity}`
            ).join(', ');
        }
        
        cartItem.innerHTML = `
            <div class="cart-item-info">
                <h4>${item.name}</h4>
                <p>₱${item.price} × ${item.quantity}</p>
                <p>Size: ${item.size}</p>
                ${extrasText ? `<p>Extras: ${extrasText}</p>` : ''}
            </div>
            <div class="cart-item-actions">
                <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                <span>${item.quantity}</span>
                <button class="quantity-btn increase" data-id="${item.id}">+</button>
                <button class="remove-btn" data-id="${item.id}">×</button>
            </div>
        `;
        
        cartItemsContainer.appendChild(cartItem);
    });
    
    
    document.querySelectorAll('.quantity-btn.decrease').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            const product = cart.find(item => item.id === productId);
            if (product) {
                editCartItemQuantity(productId, product.quantity - 1);
            }
        });
    });
    
    document.querySelectorAll('.quantity-btn.increase').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            const product = cart.find(item => item.id === productId);
            if (product) {
                editCartItemQuantity(productId, product.quantity + 1);
            }
        });
    });
    
    document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            removeFromCart(productId);
        });
    });
}

const productGrid = document.getElementById('productGrid');
const cartItemsContainer = document.getElementById('cartItems') || document.createElement('div');
const cartItemName = document.getElementById('cartItemName');
const subtotalElement = document.getElementById('subtotal');
const totalElement = document.getElementById('total');
const searchInput = document.getElementById('searchInput');
const orderButtons = document.querySelectorAll('.order-button');
let deliveryFee = 40;    
const modalContainer = document.createElement('div');
modalContainer.id = 'productModal';
document.body.appendChild(modalContainer);


const sizeOptions = [
    { name: "Small", price: 0 },
    { name: "Medium", price: 25 },
    { name: "Large", price: 50 }
];

const extraOptions = [
    { name: "Espresso Shot", price: 30 },
    { name: "Caramel Syrup", price: 20 },
    { name: "Whipped Cream", price: 15 }
];


function displayProducts(productsArray) {
    productGrid.innerHTML = '';
    productsArray.forEach(product => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card';
        productCard.innerHTML = `
            <div class="product-info">
                <div class="product-title">${product.name}</div>
                <div class="product-price">₱${product.price}</div>
                <div class="product-desc">${product.description}</div>
            </div>
            <img src="${product.image}" alt="${product.name}" class="product-img">
        `;
        productCard.addEventListener('click', () => showProductModal(product));
        productGrid.appendChild(productCard);
    });
}


function showProductModal(product) {
    const selectedSize = { name: "Small", price: 0 };
    const selectedExtras = [];
    let quantity = 1;
    
    
    function calculateTotalPrice() {
        let total = product.price;
        total += selectedSize.price;
        selectedExtras.forEach(extra => {
            total += extra.price * extra.quantity;
        });
        total *= quantity;
        return total;
    }

   
    modalContainer.innerHTML = `
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>${product.name}</h3>
                    <button class="modal-close">&times;</button>
                </div>
                
                <div class="modal-body">
                    <div class="option-section">
                        <h4>Choice of Size</h4>
                        <div class="size-options">
                            ${sizeOptions.map((size, index) => `
                                <div class="size-option">
                                    <label>
                                        <input type="radio" name="size" value="${size.name}" data-price="${size.price}" ${index === 0 ? 'checked' : ''}>
                                        ${size.name}
                                        ${size.price > 0 ? `<span class="price-addon">+₱${size.price}</span>` : ''}
                                    </label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="option-section">
                        <h4>Extra Perks</h4>
                        <div class="extra-options">
                            ${extraOptions.map(extra => `
                                <div class="extra-option">
                                    <span>${extra.name}</span>
                                    <span class="price-addon">+₱${extra.price}</span>
                                    <div class="quantity-control">
                                        <button class="extra-decrease" data-name="${extra.name}" data-price="${extra.price}">-</button>
                                        <span class="extra-quantity" data-name="${extra.name}">0</span>
                                        <button class="extra-increase" data-name="${extra.name}" data-price="${extra.price}">+</button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="quantity-section">
                        <button class="quantity-decrease">-</button>
                        <span class="product-quantity">1</span>
                        <button class="quantity-increase">+</button>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="confirm-button">Confirm</button>
                </div>
            </div>
        </div>
    `;
    
    
    modalContainer.style.display = 'block';
    
   
    const closeBtn = modalContainer.querySelector('.modal-close');
    closeBtn.addEventListener('click', () => {
        modalContainer.style.display = 'none';
    });
    
    modalContainer.querySelector('.modal-overlay').addEventListener('click', (e) => {
        if (e.target === modalContainer.querySelector('.modal-overlay')) {
            modalContainer.style.display = 'none';
        }
    });
    
   
    const sizeInputs = modalContainer.querySelectorAll('input[name="size"]');
    sizeInputs.forEach(input => {
        input.addEventListener('change', (e) => {
            if (e.target.checked) {
                selectedSize.name = e.target.value;
                selectedSize.price = parseInt(e.target.dataset.price);
            }
        });
    });
    
    
    const extraIncreaseButtons = modalContainer.querySelectorAll('.extra-increase');
    const extraDecreaseButtons = modalContainer.querySelectorAll('.extra-decrease');
    
    extraIncreaseButtons.forEach(button => {
        button.addEventListener('click', () => {
            const name = button.dataset.name;
            const price = parseInt(button.dataset.price);
            const quantityElement = modalContainer.querySelector(`.extra-quantity[data-name="${name}"]`);
            let extraQuantity = parseInt(quantityElement.textContent);
            
            extraQuantity++;
            quantityElement.textContent = extraQuantity;
            
            const existingExtra = selectedExtras.find(extra => extra.name === name);
            if (existingExtra) {
                existingExtra.quantity = extraQuantity;
            } else {
                selectedExtras.push({
                    name: name,
                    price: price,
                    quantity: extraQuantity
                });
            }
        });
    });
    
    extraDecreaseButtons.forEach(button => {
        button.addEventListener('click', () => {
            const name = button.dataset.name;
            const quantityElement = modalContainer.querySelector(`.extra-quantity[data-name="${name}"]`);
            let extraQuantity = parseInt(quantityElement.textContent);
            
            if (extraQuantity > 0) {
                extraQuantity--;
                quantityElement.textContent = extraQuantity;
                
                const existingExtraIndex = selectedExtras.findIndex(extra => extra.name === name);
                if (existingExtraIndex !== -1) {
                    if (extraQuantity === 0) {
                        selectedExtras.splice(existingExtraIndex, 1);
                    } else {
                        selectedExtras[existingExtraIndex].quantity = extraQuantity;
                    }
                }
            }
        });
    });
    
    
    const quantityElement = modalContainer.querySelector('.product-quantity');
    const decreaseBtn = modalContainer.querySelector('.quantity-decrease');
    const increaseBtn = modalContainer.querySelector('.quantity-increase');
    
    decreaseBtn.addEventListener('click', () => {
        if (quantity > 1) {
            quantity--;
            quantityElement.textContent = quantity;
        }
    });
    
    increaseBtn.addEventListener('click', () => {
        quantity++;
        quantityElement.textContent = quantity;
    });
    
    
    const confirmBtn = modalContainer.querySelector('.confirm-button');
    confirmBtn.addEventListener('click', () => {
        
        const customProduct = {
            id: product.id,
            name: product.name,
            basePrice: product.price,
            price: product.price + selectedSize.price, // Base price + size price
            size: selectedSize.name,
            extras: [...selectedExtras], // Clone the array
            quantity: quantity,
            image: product.image
        };
        
       
        addCustomizedProductToCart(customProduct);
        
        
        modalContainer.style.display = 'none';
    });
}


function addCustomizedProductToCart(customProduct) {
    
    const customId = `${customProduct.id}-${Date.now()}`;
    
    
    let totalItemPrice = customProduct.price;
    customProduct.extras.forEach(extra => {
        totalItemPrice += extra.price * extra.quantity;
    });
    
    
    const cartItem = {
        id: customId,
        originalId: customProduct.id,
        name: customProduct.name,
        price: totalItemPrice,
        basePrice: customProduct.basePrice,
        size: customProduct.size,
        extras: customProduct.extras,
        quantity: customProduct.quantity,
        image: customProduct.image
    };
    
    
    cart.push(cartItem);
    updateCart();
}


function addToCart(product) {
    const existingItem = cart.find(item => item.id === product.id);
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            ...product, 
            size: "Small", 
            quantity: 1,
            extras: []
        });
    }
    updateCart();
}


function removeFromCart(productId) {
    cart = cart.filter(item => item.id !== productId);
    updateCart();
}


function editCartItemQuantity(productId, newQuantity) {
    const product = cart.find(item => item.id === productId);
    
    if (product) {
        if (newQuantity < 1) {
           
            removeFromCart(productId);
            return;
        }
        
       
        product.quantity = newQuantity;
        updateCart();
    }
}


function updateCart() {
    
    if (cart.length > 0) {
        cartItemName.textContent = cart[0].name;
    } else {
        cartItemName.textContent = "";
    }
    

    let subtotal = 0;
    cart.forEach(item => {
        subtotal += item.price * item.quantity;
    });
    
    
    subtotalElement.textContent = `₱${subtotal}`;
    totalElement.textContent = `₱${subtotal + deliveryFee}`;
    
    
    renderCartItems();
}


function renderCartItems() {
    
    if (!document.getElementById('cartItems')) return;
    
    cartItemsContainer.innerHTML = '';
    
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty</p>';
        return;
    }
    
    cart.forEach(item => {
        const cartItem = document.createElement('div');
        cartItem.classList.add('cart-item');
        
    
        let extrasText = '';
        if (item.extras && item.extras.length > 0) {
            extrasText = item.extras.map(extra => 
                `${extra.name} x${extra.quantity}`
            ).join(', ');
        }
        
        cartItem.innerHTML = `
            <div class="cart-item-info">
                <h4>${item.name}</h4>
                <p>₱${item.price} × ${item.quantity}</p>
                <p>Size: ${item.size}</p>
                ${extrasText ? `<p>Extras: ${extrasText}</p>` : ''}
            </div>
            <div class="cart-item-actions">
                <button class="quantity-btn decrease" data-id="${item.id}">-</button>
                <span>${item.quantity}</span>
                <button class="quantity-btn increase" data-id="${item.id}">+</button>
                <button class="remove-btn" data-id="${item.id}">×</button>
            </div>
        `;
        
        cartItemsContainer.appendChild(cartItem);
    });
    
    
    document.querySelectorAll('.quantity-btn.decrease').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            const product = cart.find(item => item.id === productId);
            if (product) {
                editCartItemQuantity(productId, product.quantity - 1);
            }
        });
    });
    
    document.querySelectorAll('.quantity-btn.increase').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            const product = cart.find(item => item.id === productId);
            if (product) {
                editCartItemQuantity(productId, product.quantity + 1);
            }
        });
    });
    
    document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const productId = e.target.dataset.id;
            removeFromCart(productId);
        });
    });
}


searchInput.addEventListener('input', (e) => {
    const searchTerm = e.target.value.toLowerCase();
    const filteredProducts = products.filter(product => 
        product.name.toLowerCase().includes(searchTerm) || 
        product.description.toLowerCase().includes(searchTerm)
    );
    displayProducts(filteredProducts);
});


orderButtons.forEach(button => {
    button.addEventListener('click', () => {
        orderButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
    });
});


function initialize() {
    displayProducts(products);
    updateCart();
    
    
    const modalStyle = document.createElement('style');
    modalStyle.textContent = `
        #productModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
        }
        
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: #fff;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-header h3 {
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .option-section {
            margin-bottom: 20px;
        }
        
        .option-section h4 {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        .size-options, .extra-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .size-option label {
            display: flex;
            align-items: center;
        }
        
        .price-addon {
            margin-left: 5px;
            color: #666;
            font-size: 0.9em;
        }
        
        .extra-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .extra-decrease, .extra-increase, .quantity-decrease, .quantity-increase {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .quantity-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .product-quantity {
            font-size: 18px;
            font-weight: bold;
        }
        
        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
        }
        
        .confirm-button {
            background-color: #000;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }
        
        /* Cart styles */
        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }
    `;
    document.head.appendChild(modalStyle);
}


document.addEventListener('DOMContentLoaded', initialize);


if (document.readyState === 'complete' || document.readyState === 'interactive') {
    initialize();
}

const checkoutBtn = document.getElementById('checkoutButton');

checkoutBtn.addEventListener('click', () => {
    if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
    }

    alert("Thank you for your order!");
    cart = [];
    updateCart();
});

document.getElementById("checkoutButton").addEventListener("click", function () {
    const items = document.querySelectorAll("#cartItems .cart-item");
    const subtotal = document.getElementById("subtotal")?.textContent || "₱0";
    const deliveryFee = document.getElementById("deliveryFee")?.textContent || "₱0";
    const total = document.getElementById("total")?.textContent || "₱0";

    if (items.length === 0) {
        alert("Your cart is empty.");
        return;
    }

    let receiptHTML = "<h6 class='mb-3'>Thank you for your order!</h6><hr>";
    receiptHTML += "<ul class='list-unstyled'>";

    items.forEach(item => {
        const name = item.querySelector(".item-name")?.textContent || "Item";
        const qty = item.querySelector(".item-qty")?.textContent || "x1";
        const price = item.querySelector(".item-price")?.textContent || "₱0";
        receiptHTML += `<li class="mb-1">${qty} ${name} — <strong>${price}</strong></li>`;
    });

    receiptHTML += "</ul><hr>";
    receiptHTML += `<p>Subtotal: <strong>${subtotal}</strong></p>`;
    receiptHTML += `<p>Delivery Fee: <strong>${deliveryFee}</strong></p>`;
    receiptHTML += `<p>Total: <strong>${total}</strong></p>`;

    document.getElementById("receiptContent").innerHTML = receiptHTML;

    $('#receiptModal').modal('show');
});

function printReceipt() {
    const printContents = document.getElementById("receiptContent").innerHTML;
    const win = window.open('', '', 'height=600,width=800');
    win.document.write('<html><head><title>El Gato Café Receipt</title></head><body>');
    win.document.write('<h2>El Gato Café</h2><hr>');
    win.document.write(printContents);
    win.document.write('</body></html>');
    win.document.close();
    win.print();
}


